<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Recursive Sorting</title>
  <link href="../../../../css/main.css" type="text/css" rel="stylesheet">
</head>
<body>
  <div class='ps-note'></div>
  <ul class="n-note">
    <template id="note-link-template">
      <li class="note-link"></li>
    </template>
    <li class="note-link">01<a href="../01/"><span></span></a></li>
    <li class="note-link">02<a href="../02/"><span></span></a></li>
    <li class="note-link">03<a href="#"><span></span></a></li>
    <li class="note-link">04<a href="#"><span></span></a></li>
    <li class="note-link">05<a href="#"><span></span></a></li>
    <li class="note-link">06<a href="#"><span></span></a></li>
    <li class="note-link">07<a href="#"><span></span></a></li>
    <li class="note-link">08<a href="#"><span></span></a></li>
    <li class="note-link">09<a href="#"><span></span></a></li>
    <li class="note-link">10<a href="#"><span></span></a></li>
    <li class="note-link">11<a href="#"><span></span></a></li>
    <li class="note-link note-link--active">12<a href="#"><span></span></a></li>
  </ul>
  <p class='note__section'>CPSC 221.12</p>
  <main class='page note-container'>
    <article class="note">
      <h1>Recursive Sorting</h1>
      <h2>Mergesort</h2>
      <p>Mergesort is an efficient sorting algorithm that divides the array in haves then merges these halves together.</p>
      <p>The algorithm repeatedly divides the array in half until there is only one element. An array with one element is considered sorted.</p>
      <blockquote>
        <p>Merging two single-element arrays only takes one comparison!</p>
      </blockquote>
      <h3>Method</h3>
      <p>Say we want to sort the following array:</p>
      <figure>
        <div class='array'>
          <div class='block'>8</div>
          <div class='block'>1</div>
          <div class='block'>4</div>
          <div class='block'>5</div>
          <div class='block'>3</div>
          <div class='block'>7</div>
        </div>
      </figure>
      <p>The first thing mergesort does is to split the array in half:</p>
      <figure>
        <div class='array'>
          <div class='block'>8</div>
          <div class='block'>1</div>
          <div class='block'>4</div>
        </div>
        <div class='array'>
          <div class='block'>5</div>
          <div class='block'>3</div>
          <div class='block'>7</div>
        </div>
      </figure>
      <p>And again:</p>
      <figure>
        <div class='array'>
          <div class='block'>8</div>
          <div class='block'>1</div>
        </div>
        <div class='array'>
          <div class='block'>4</div>
        </div>
        <div class='array'>
          <div class='block'>5</div>
          <div class='block'>3</div>
        </div>
        <div class='array'>
          <div class='block'>7</div>
        </div>
      </figure>
      <p>And again, until each subarray has only a single element:</p>
      <figure>
        <div class='array'>
          <div class='block'>8</div>
        </div>
        <div class='array'>
          <div class='block'>1</div>
        </div>
        <div class='array'>
          <div class='block'>4</div>
        </div>
        <div class='array'>
          <div class='block'>5</div>
        </div>
        <div class='array'>
          <div class='block'>3</div>
        </div>
        <div class='array'>
          <div class='block'>7</div>
        </div>
      </figure>
      <p>The array is then sorted during the merging process. It compares the individual elements then merge them into one array:</p>
      <figure>
        <div class='array'>
          <div class='block'>1</div>
          <div class='block'>8</div>
        </div>
        <div class='array'>
          <div class='block'>4</div>
        </div>
        <div class='array'>
          <div class='block'>3</div>
          <div class='block'>5</div>
        </div>
        <div class='array'>
          <div class='block'>7</div>
        </div>
      </figure>
      <p>And again until the array is completely sorted:</p>
      <figure>
        <div class='array'>
          <div class='block'>1</div>
          <div class='block'>4</div>
          <div class='block'>8</div>
        </div>
        <div class='array'>
          <div class='block'>3</div>
          <div class='block'>5</div>
          <div class='block'>7</div>
        </div>
      </figure>
      <figure>
        <div class='array'>
          <div class='block'>1</div>
          <div class='block'>3</div>
          <div class='block'>4</div>
          <div class='block'>5</div>
          <div class='block'>7</div>
          <div class='block'>8</div>
        </div>
      </figure>
      <h3>Analysis</h3>
      <blockquote>
        <p>How many comparisons are made in the merge step?</p>
      </blockquote>
      <p>In the worst case, we have to compare the entirety of both subarrays, i.e. <code>n - 1</code> comparisons.</p>
      <p>In the best case, the second subarray is all larger than the first subarray. In this case, we only need to make <code>n / 2</code> comparisons.</p>
      <p>In either case <code>n</code> subarray items are copied.</p>
      <p>The division process takes <code>O(log n)</code> time, as it takes <code>log n</code> divisions to reach 1-element subarrays.</p>
      <p>Overall, mergesort runs in <code>O(nlogn)</code> time.</p>
      <h2>Quicksort</h2>
      <p>Quicksort sorts an array by repeatedly partitioning it. <strong>Partitioning</strong> is the process of dividing an array into sections based on some criteria.</p>
      <p>We will partition the array around a <em>pivot</em>, often the last item in the array. Then we start with the first item in the array and the last item (excluding pivot). These items are often labelled <em>low</em> and <em>high</em>, colored light and dark blue respectively here:</p>
      <figure>
        <div class='array'>
          <div class='block highlight-1'>31</div>
          <div class='block'>12</div>
          <div class='block'>07</div>
          <div class='block'>23</div>
          <div class='block'>92</div>
          <div class='block'>02</div>
          <div class='block highlight-2'>11</div>
          <div class='block'>18</div>
        </div>
      </figure>
      <p>Both are then compared against the pivot. There are several cases for us to consider. At this step of sorting, we encountered the first case:</p>
      <p>1. Both <code>low > pivot</code> and <code>high < pivot</code></p>
      <p>Low and high is swapped with each other:</p>
      <figure>
        <div class='array'>
          <div class='block highlight-2'>11</div>
          <div class='block'>12</div>
          <div class='block'>07</div>
          <div class='block'>23</div>
          <div class='block'>92</div>
          <div class='block'>02</div>
          <div class='block highlight-1'>31</div>
          <div class='block'>18</div>
        </div>
      </figure>
      <p>Afterwards, the index of low is incremented, and the index of high is decremented:</p>
      <figure>
        <div class='array'>
          <div class='block'>11</div>
          <div class='block highlight-1'>12</div>
          <div class='block'>07</div>
          <div class='block'>23</div>
          <div class='block'>92</div>
          <div class='block highlight-2'>02</div>
          <div class='block'>31</div>
          <div class='block'>18</div>
        </div>
      </figure>
      <p>2. Both <code>low < pivot</code> and <code>high < pivot</code></p>
      <p>Now we will keep incrementing the index of low until <code>low > pivot</code> is satisfied:</p>
      <figure>
        <div class='array'>
          <div class='block'>11</div>
          <div class='block'>12</div>
          <div class='block'>07</div>
          <div class='block highlight-1'>23</div>
          <div class='block'>92</div>
          <div class='block highlight-2'>02</div>
          <div class='block'>31</div>
          <div class='block'>18</div>
        </div>
      </figure>
      <p>Now we're back to the first case, so we swap low with high:</p>
      <figure>
        <div class='array'>
          <div class='block'>11</div>
          <div class='block'>12</div>
          <div class='block'>07</div>
          <div class='block highlight-2'>02</div>
          <div class='block'>92</div>
          <div class='block highlight-1'>23</div>
          <div class='block'>31</div>
          <div class='block'>18</div>
        </div>
      </figure>
      <p>Now if we increment low and decrement high, we find that <code>(index of) low == (index of) high</code>. When we get to this point, we swap this value with the original pivot, 18:</p>
      <figure>
        <div class='array'>
          <div class='block highlight-1'>11</div>
          <div class='block highlight-1'>12</div>
          <div class='block highlight-1'>07</div>
          <div class='block highlight-1'>02</div>
          <div class='block'>18</div>
          <div class='block highlight-2'>23</div>
          <div class='block highlight-2'>31</div>
          <div class='block highlight-2'>92</div>
        </div>
      </figure>
      <p>Notice how now everything to the left of 18 is smaller, and everything to the right of 18 is larger.</p>
      <p>The entire partioning process is repeated for the array to the left of 18 and for the array to the right of 18.</p>
      <h3>Analysis</h3>
      <p>Quicksort's <strong>best case</strong> is when the partitioning process divides the array in (almost) half every time:</p>
      <figure>
        <div class='array'>
          <div class='block'>9</div>
          <div class='block'>1</div>
          <div class='block'>2</div>
          <div class='block'>8</div>
          <div class='block'>3</div>
          <div class='block'>7</div>
          <div class='block'>6</div>
          <div class='block'>4</div>
          <div class='block'>5</div>
        </div>
      </figure>
      <p>After the first partition:</p>
      <figure>
        <div class='array'>
          <div class='block highlight-1'>4</div>
          <div class='block highlight-1'>1</div>
          <div class='block highlight-1'>2</div>
          <div class='block highlight-1'>3</div>
          <div class='block'>5</div>
          <div class='block highlight-2'>7</div>
          <div class='block highlight-2'>6</div>
          <div class='block highlight-2'>9</div>
          <div class='block highlight-2'>8</div>
        </div>
      </figure>
      <p>After the second partition:</p>
      <figure>
        <div class='array'>
          <div class='block highlight-1'>2</div>
          <div class='block highlight-1'>1</div>
          <div class='block'>3</div>
          <div class='block highlight-2'>4</div>
          <div class='block'>5</div>
          <div class='block highlight-1'>7</div>
          <div class='block highlight-1'>6</div>
          <div class='block'>8</div>
          <div class='block highlight-2'>9</div>
        </div>
      </figure>
      <p>The array is sorted after the third partition:</p>
      <figure>
        <div class='array'>
          <div class='block'>1</div>
          <div class='block'>2</div>
          <div class='block'>3</div>
          <div class='block'>4</div>
          <div class='block'>5</div>
          <div class='block'>6</div>
          <div class='block'>7</div>
          <div class='block'>8</div>
          <div class='block'>9</div>
        </div>
      </figure>
      <p>For every partition, around <code>n</code> comparisons are made. Since the array is halved every time, <code>log n</code> divisions have to be done until the subarray has only 1 element.</p>
      <p>Therefore at best case, quicksort performs in <code>O(nlogn)</code>.</p>
      <p>Quicksort's <strong>worst case</strong> is when the partitioning results in no items in one of the sides.</p>
      <p>This happens if the array is either already ordered or is reversed:</p>
      <figure>
        <div class='array'>
          <div class='block'>9</div>
          <div class='block'>8</div>
          <div class='block'>7</div>
          <div class='block'>6</div>
          <div class='block'>5</div>
          <div class='block'>4</div>
          <div class='block'>3</div>
          <div class='block'>2</div>
          <div class='block'>1</div>
        </div>
      </figure>
      <p>After the first partition:</p>
      <figure>
        <div class='array'>
          <div class='block'>1</div>
          <div class='block highlight-2'>8</div>
          <div class='block highlight-2'>7</div>
          <div class='block highlight-2'>6</div>
          <div class='block highlight-2'>5</div>
          <div class='block highlight-2'>4</div>
          <div class='block highlight-2'>3</div>
          <div class='block highlight-2'>2</div>
          <div class='block highlight-2'>9</div>
        </div>
      </figure>
      <p>In this case the array has to be partitioned <code>n</code> times. Since every partition does <code>n</code> comparisons, at its worst quicksort performs in <code>O(n<sup>2</sup>)</code>.</p>
    </article>
  </main>
  <div class='identifier identifier--science'>CPSC</div>
  <script src="../../../../js/note.js" type="text/javascript"></script>
</body>
</html>